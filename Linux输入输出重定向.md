#### Linux 命令默认从标准输入设备(stdin)获取输入，将结果输出到标准输出设备(stdout)显示。一般情况下，标准输入设备就是键盘，标准输出设备就是终端，即显示器。

## 输出重定向

命令的输出不仅可以是显示器，还可以很容易的转移向到文件，这被称为输出重定向。

##### 命令输出重定向的语法为：
```
$ command > file
```
这样，输出到显示器的内容就可以被重定向到文件。

##### 例如，下面的命令在显示器上不会看到任何输出：
```
$ who > users
```
##### 打开 users 文件，可以看到下面的内容：
```
$ cat users
oko         tty01   Sep 12 07:30
ai          tty15   Sep 12 13:32
ruth        tty21   Sep 12 10:10
pat         tty24   Sep 12 13:07
steve       tty25   Sep 12 13:03
```
##### 输出重定向会覆盖文件内容，请看下面的例子：
```
$ echo line 1> users
$ cat users
line 1
```
##### 如果不希望文件内容被覆盖，可以使用 >> 追加到文件末尾，例如：
```
$ echo line 2>> users
$ cat users
line 1
line 2
```

## 输入重定向
##### 和输出重定向一样，Unix 命令也可以从文件获取输入，语法为：
```
command < file
```
这样，本来需要从键盘获取输入的命令会转移到文件读取内容。
注意：输出重定向是大于号(>)，输入重定向是小于号(<)。

#####例如，计算 users 文件中的行数，可以使用下面的命令：
```
$ wc -l users
2 users
```
##### 也可以将输入重定向到 users 文件：
```
$ wc -l < users
2
```
> 注意：上面两个例子的结果不同：第一个例子，会输出文件名；第二个不会，因为它仅仅知道从标准输入读取内容。


## 重定向深入讲解
#### 一般情况下，每个 Unix/Linux 命令运行时都会打开三个文件：
* 标准输入文件(stdin)：stdin的文件描述符为0，默认从stdin读取数据。
* 标准输出文件(stdout)：stdout 的文件描述符为1，默认向stdout输出数据。
* 标准错误文件(stderr)：stderr的文件描述符为2，会向stderr流中写入错误信息。

> 默认情况下，command > file 将 stdout 重定向到 file，command < file 将stdin 重定向到 file。

```
// 如果希望 stderr 重定向到 file
$ command 2> file
// 如果希望 stderr 追加到 file 文件末尾
$ command 2>> file
// 如果希望将 stdout 和 stderr 合并后重定向到 file
$ command >> file 2>&1
// 如果希望对输入输出都重定向，command命令将stdin重定向到file1，将stdout重定向到 file2
$ command < file1 > file2 
```

## 命令解析
|名称|文件描述符|使用|符号连接|
|:---:|---|---|---|---|---|
标准输入stdin|0|使用 < 或 <<|/dev/stdin -> /proc/self/fd/0
标准输出stdout|1|使用 > 或 >>|/dev/stdout -> /proc/self/fd/1
标准错误输出stderr|2|使用 2> 或 2 >>|/dev/stderr -> /proc/self/fd/2

|命令|解释|
|:---:|---|
/dev/null|Linux的空设备文件 
1>/dev/null|表示标准输出重定向到空设备文件,也就是不输出任何信息到终端,不显示任何信息
&1|&表示等于的意思,2>&1,表示2的输出重定向等于1
2>&1|表示标准错误输出重定向等同于标准输出,标准输出和标准错误输出都重定向到空设备文件
<filename|重定向标准输入自文件
>filename|重定向标准输出到文件，覆盖文件。
>>filename|重定向标准输出到文件，追加模式。
2>filename|重定向标准错误到文件。
&>filename|重定向标准输出和标准错误到文件。相当于同时使用 > 和 2>

```
command > /dev/null 2>&1 &
等同于
command 1> /dev/null 2>&1 &
```
> 这条命令的意思就是在后台执行这个程序,并将错误输出2重定向到标准输出1,然后将标准输出1全部放到/dev/null文件,也就是清空.
> 
> 所以可以看出" >/dev/null 2>&1 "常用来避免shell命令或者程序等运行中有内容输出。

## 使用
- 可以用来指定需要重定向的标准输入或输出。
- 在一般使用时，默认的是标准输出，当我们需要特殊用途时，可以使用其他标号。
- 例如，将某个程序的错误信息输出到log文件中：
``./program 2> log。这样标准输出还是在屏幕上，但是错误信息会输出到log文件中。``
- 另外，也可以实现0，1，2之间的重定向。2>&1：将错误信息重定向到标准输出。

##### 举个例子，在用find的时候，有的目录不允许访问，find就输出很多行的错误，真正的搜索结果就看不到了。这时我会把标准错误重定向到空设备去。
```
find / -name "filename" 2> /dev/null
```
##### 再比如在用gdb进行自动测试的时候，把命令写到一个文件里，然后送入gdb。
```
gdbprogram < test_script.gdb
```
